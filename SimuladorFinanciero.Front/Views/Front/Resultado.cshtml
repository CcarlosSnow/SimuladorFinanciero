@using SimuladorFinanciero.Entities
@using SimuladorFinanciero.Helpers
@section ScriptHead{
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    @Scripts.Render("~/Front/confirm")
    @Scripts.Render("~/Front/basejs")
    @Styles.Render("~/Front/basecss")
    <link href="http://fontawesome.io/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
}

@section Titulo{
    <p class="title">Simulador financiero</p>
}

<div id="overlay-success">
    <div id="success-send">
        <i class="fa fa-times close" aria-hidden="true"></i>
        <img src="images/check-success.png" border="0" />
        <p>El correo se envió correctamente</p>
    </div>
</div>
<div class="overlay"></div>
<div class="navi-left">
    <a class="btn-Editar"><i></i> Editar</a>
    <a class="btn-Exportar" href=""><i></i> Exportar</a>
    <a class="btn-Enviar mobile fancybox" href="#enviar"><i></i> Enviar</a>
</div>
<div id="editar">
    <i class="fa fa-times-circle close" aria-hidden="true"></i>
    <div class="cscroll">
        <p class="sub">1. Selecione un producto</p>
        <div class="accordion">
            <ul>
                <li class="a">
                    <a class="title">Medios de pago <i class="fa fa-caret-right" aria-hidden="true"></i></a>
                    <div class="content">
                        <a class="item"><span></span>Pagos y comercio electrónico</a>
                        <a class="item"><span></span>Transferencias recibidas</a>
                        <a class="item"><span></span>Cobranza Simple de Exportación</a>
                        <a class="item"><span></span>Cobranza Documentaria de Exportación</a>
                        <a class="item"><span></span>Carta de Crédito de Exportación</a>
                    </div>
                </li>
                <li class="b">
                    <a class="title">Financiamiento <i class="fa fa-caret-right" aria-hidden="true"></i></a>
                    <div class="content">
                        <a class="item"><span></span>Financiamiento Pre Embarque</a>
                        <a class="item"><span></span>Financiamiento Post Embarque</a>
                        <a class="item"><span></span>Factoring Internacional de Exportación</a>
                        <a class="item"><span></span>Compra de documentos - Forfaiting</a>
                    </div>
                </li>
                <li class="c">
                    <a class="title">Garantías <i class="fa fa-caret-right" aria-hidden="true"></i></a>
                    <div class="content">
                        <a href="cartas-fianza.html" class="item"><span></span> Cartas Fianza</a>
                        <a class="item"><span></span> Stand By Recibidas</a>
                        <a class="item"><span></span> Stand By Emitidas</a>
                    </div>
                </li>
                <li class="d">
                    <a class="title">Envío de dinero <i class="fa fa-caret-right" aria-hidden="true"></i></a>
                </li>
            </ul>
        </div>
        <p class="sub">2. Selecione e ingrese los datos</p>
        <div class="middle">
            <a href="#bancos" class="btn-bank fancybox">
                <div class="banco">Seleccionar banco(s)</div>
                <i class="fa fa-plus-circle" aria-hidden="true"></i>
                <!-- selecionar active
                <div class="banco active">BBVA Banco Continental, Banco Financiero...</div>
                <i class="fa fa-check active" aria-hidden="true"></i>
                -->
            </a>
            <div class="btn-money"><span>$</span><input type="text" maxlength="10" placeholder="Ingresar monto Ej.: 60.5" /></div>
            <div class="btn-days">
                <div class="select">
                    <input disabled type="text" placeholder="Seleccione un período (30, 60 ó 90 días)" />
                    <div class="sc">
                        <i class="fa fa-caret-up" aria-hidden="true"></i>
                        <i class="fa fa-caret-down" aria-hidden="true"></i>
                    </div>
                </div>
                <ul>
                    <li data-rel="30">30 días</li>
                    <li data-rel="60">60 días</li>
                    <li data-rel="90">90 días</li>
                </ul>
            </div>
            <a href="resultados.html" class="btn-Actualizar">Actualizar</a>
        </div>
    </div>
</div>
<section class="row">
    <div class="center">
        <div class="page result">
            <p class="txt-a">Resultados</p>
            <h1>@ViewBag.TipoNombre - @ViewBag.Producto.Nombre.Substring(4)</h1>
            <p class="txt-b">$ @ViewBag.Monto - <span>30 días</span><a href="#edit-result" class="btn-EditarResultados fancybox"></a></p>
            <!-- mobile -->
            <!--<a href="#enviar" class="mobile send fancybox">Enviar por correo</a>-->
            <a href="#enviar" class="mobile link fancybox">Enviar por correo</a>
            <div id="edit-result" class="hidden">
                <div class="middle">
                    <h3>Editar</h3>
                    <div class="btn-money"><span>$</span><input type="text" maxlength="10" placeholder="Ingresar monto Ej.: 60.5" /></div>
                    <div class="btn-days">
                        <div class="select">
                            <span>30 días</span>
                            <div class="sc">
                                <i class="fa fa-caret-up" aria-hidden="true"></i>
                                <i class="fa fa-caret-down" aria-hidden="true"></i>
                            </div>
                        </div>
                        <ul>
                            <li data-rel="30">30 días</li>
                            <li data-rel="60">60 días</li>
                            <li data-rel="90">90 días</li>
                        </ul>
                    </div>
                    <a href="resultados.html" class="btn-Actualizar">Actualizar</a>
                </div>
            </div>
            <!-- /mobile -->
            <div class="content">
                <div class="title">
                    <div class="left">Banco</div>
                    <div class="right">Gasto Financiero</div>
                </div>
                <div class="border">
                    <div class="row">
                        @foreach (ProductoBanco i in ViewBag.ListaProductosBancos)
                        {
                            decimal GastoTotalUsualDesktop = 0;
                            decimal GastoTotalUsualMobile = 0;
                            <div class="bank">
                                <div class="summary">
                                    <div class="name">@i.Banco.Nombre</div>
                                    <div class="num" id="gastototal-@i.IdBanco">$ @Formatos.ConvertirNumeroFormat(GastoTotalUsualDesktop)</div>
                                    <i class="fa fa-caret-right" aria-hidden="true"></i>
                                </div>

                                <div class="detail">
                                    <div class="table">
                                        <div class="thead">
                                            <div class="col a">Concepto</div>
                                            <div class="col b">Observaciones</div>
                                            <div class="col c">Tasa %</div>
                                            <div class="col d">Minimo $</div>
                                            <div class="col e">Máximo $</div>
                                            <div class="col f">Gastos $</div>
                                        </div>
                                        @foreach (ConceptoProductoBanco cpbu in ViewBag.ListaConceptosProductosBancosUsuales)
                                        {
                                            if (i.Banco.IdBanco == cpbu.IdBanco)
                                            {
                                                <div class="tbody">
                                                    <div class="col a">
                                                        <span>@cpbu.Concepto.Nombre</span>
                                                        <!-- mobile -->
                                                        <div class="cols mobile">
                                                            <div>
                                                                <div class="row"><p>Observaciones</p><p><a href="#detalle-@cpbu.IdConcepto" class="fancybox">Detalle</a></p></div>
                                                                <div class="row"><p>Tasa</p><p>@Formatos.ConvertirNumeroFormatTasa(cpbu.Tasa)</p></div>
                                                                <div class="row"><p>Minimo $</p><p>@Formatos.ConvertirNumeroFormat(cpbu.Minimo)</p></div>
                                                                <div class="row"><p>Máximo $</p><p>@Formatos.ConvertirNumeroFormat(cpbu.Maximo)</p></div>
                                                                <div class="row"><p>Gastos $</p><p>@Formatos.CalcularGasto(cpbu.Tasa, Convert.ToDecimal(ViewBag.Monto), cpbu.Minimo, cpbu.Maximo, ref GastoTotalUsualMobile)</p></div>
                                                            </div>
                                                            <div id="#detalle-@cpbu.IdConcepto" class="hidden mod-ban">
                                                                @cpbu.Observaciones
                                                            </div>
                                                        </div>
                                                        <!-- /mobile -->
                                                    </div>
                                                    <div class="col b">@cpbu.Observaciones</div>
                                                    <div class="col c">@Formatos.ConvertirNumeroFormatTasa(cpbu.Tasa)</div>
                                                    <div class="col d">@Formatos.ConvertirNumeroFormat(cpbu.Minimo)</div>
                                                    <div class="col e">@Formatos.ConvertirNumeroFormat(cpbu.Maximo)</div>
                                                    <div class="col f">@Formatos.CalcularGasto(cpbu.Tasa, Convert.ToDecimal(ViewBag.Monto), cpbu.Minimo, cpbu.Maximo, ref GastoTotalUsualDesktop)</div>
                                                </div>
                                            }
                                        }
                                        <script>
                                            $('#gastototal-@i.IdBanco').html("$ " + @Formatos.ConvertirNumeroFormat(GastoTotalUsualDesktop));
                                        </script>
                                    </div>
                                    <div class="actions">
                                        <a href="#@i.IdBanco-informacion" class="fancybox"><i class="fa fa-plus-circle" aria-hidden="true"></i> Ver información de contacto</a>
                                        @{ var Conteo = 0; }
                                        @foreach (ConceptoProductoBanco cpbu in ViewBag.ListaConceptosProductosBancosEventuales)
                                        {
                                            if (i.Banco.IdBanco == cpbu.IdBanco)
                                            {
                                                Conteo = Conteo + 1;
                                            }
                                        }
                                        @if (Conteo > 0)
                                        {
                                            <a href="#@i.IdBanco-costos" class="fancybox"><i class="fa fa-plus-circle" aria-hidden="true"></i> Ver costos eventuales</a>
                                        }
                                        <div id="@i.IdBanco-informacion" class="hidden resultado">
                                            <p>
                                                (*) Consulte la fuente de información <a href="@i.WebTarifario">aqui</a> o tome contacto
                                                con <a>@i.Banco.Nombre</a><br />
                                                a través de @i.Contacto
                                            </p>
                                        </div>
                                        <div id="@i.IdBanco-costos" class="hidden resultado-tabla">
                                            <h3>Costos eventuales</h3>
                                            <h4>@i.Banco.Nombre</h4>
                                            <div class="table">
                                                <div class="thead">
                                                    <div class="col a">Concepto</div>
                                                    <div class="col b">Observaciones</div>
                                                    <div class="col c">Tasa %</div>
                                                    <div class="col d">Minimo $</div>
                                                    <div class="col e">Máximo $</div>
                                                    <div class="col f">Gastos $</div>
                                                </div>
                                                @foreach (ConceptoProductoBanco cpbe in ViewBag.ListaConceptosProductosBancosEventuales)
                                                {
                                                    decimal GastoTotalEventual = 0;
                                                    if (i.Banco.IdBanco == cpbe.IdBanco)
                                                    {
                                                        <div class="tbody">
                                                            <div class="col a">
                                                                <span>@cpbe.Concepto.Nombre</span>
                                                                <!-- mobile -->
                                                                <div class="cols mobile">
                                                                    <div>
                                                                        <div class="row"><p>Observaciones</p><p><a href="#detalle-@cpbe.IdConcepto" class="fancybox">Detalle</a></p></div>
                                                                        <div class="row"><p>Tasa</p><p>@Formatos.ConvertirNumeroFormatTasa(cpbe.Tasa)</p></div>
                                                                        <div class="row"><p>Minimo $</p><p>@Formatos.ConvertirNumeroFormat(cpbe.Minimo)</p></div>
                                                                        <div class="row"><p>Máximo $</p><p>@Formatos.ConvertirNumeroFormat(cpbe.Maximo)</p></div>
                                                                        <div class="row"><p>Gastos $</p><p>@Formatos.CalcularGasto(cpbe.Tasa, Convert.ToDecimal(ViewBag.Monto), cpbe.Minimo, cpbe.Maximo, ref GastoTotalEventual)</p></div>
                                                                    </div>
                                                                    <div id="detalle-@cpbe.IdConcepto" class="hidden mod-ban">
                                                                        @cpbe.Observaciones
                                                                    </div>
                                                                </div>
                                                                <!-- /mobile -->
                                                            </div>
                                                            <div class="col b">@cpbe.Observaciones</div>
                                                            <div class="col c">@Formatos.ConvertirNumeroFormatTasa(cpbe.Tasa)</div>
                                                            <div class="col d">@Formatos.ConvertirNumeroFormat(cpbe.Minimo)</div>
                                                            <div class="col e">@Formatos.ConvertirNumeroFormat(cpbe.Maximo)</div>
                                                            <div class="col f">@Formatos.CalcularGasto(cpbe.Tasa, Convert.ToDecimal(ViewBag.Monto), cpbe.Minimo, cpbe.Maximo, ref GastoTotalEventual)</div>
                                                        </div>
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                                            }
                    </div>
                </div>
                <a href="@Url.Action("Index","Front")" class="btn-Nueva">Nueva simulación</a>
            </div>
        </div>
    </div>
</section>
<div id="bancos" class="hidden">
    <h3>Seleccione uno o más bancos</h3>
    <div class="all"><label><input type="checkbox" /><span>Seleccionar todo<span></label></div>
    <ul>
        <li><label class="selected"><input type="checkbox" rel="1" /><span>BBVA Banco Continental</span></label></li>
        <li><label><input type="checkbox" rel="2" /><span>Banco Financiero</span></label></li>
        <li><label><input type="checkbox" rel="3" /><span>Banco GNB</span></label></li>
        <li><label><input type="checkbox" rel="4" /><span>Banco Interamericano de Finanzas</span></label></li>
        <li><label><input type="checkbox" rel="5" /><span>Banco Santander</span></label></li>
        <li><label><input type="checkbox" rel="6" /><span>Banco de Comercio</span></label></li>
        <li><label><input type="checkbox" rel="7" /><span>Banco de Crédito del Perú</span></label></li>
        <li><label><input type="checkbox" rel="8" /><span>Citibank</span></label></li>
        <li><label><input type="checkbox" rel="9" /><span>Interbank</span></label></li>
        <li><label><input type="checkbox" rel="10" /><span>Scotiabank</span></label></li>
    </ul>
    <a class="btn-Select">Seleccionar</a>
</div>
<div id="enviar" class="hidden">
    <h3>Envío por correo</h3>
    <input type="email" class="email" placeholder="Ingresar correo" />
    <a class="btn-Enviar">Enviar</a>
</div>